(this["webpackJsonpfamiliar-pwa2"]=this["webpackJsonpfamiliar-pwa2"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(5),r=n.n(c),a=n(31),i=n.n(a),s=(n(37),n(38),n(8)),l=n(20),u=n.n(l),h=n(10),f=function(e){var t=u()("familiar-pwa2/img/bg.jpg"),n=Object(s.a)(t,1)[0];return Object(o.jsx)(h.Image,{width:e.w,height:e.h,image:n})},j=function(){var e=u()("./img/walking_01.png"),t=Object(s.a)(e,1)[0];return Object(o.jsx)(h.Image,{width:500,height:500,x:390,y:130,image:t})},d=function(e){return Object(o.jsx)(h.Stage,{className:"stage",width:e.w,height:e.h,children:Object(o.jsxs)(h.Layer,{children:[Object(o.jsx)(f,{w:e.w,h:e.h}),Object(o.jsx)(j,{})]})})},g=n(32),b=function(){var e=Object(c.useRef)(null),t=Object(c.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),l=Object(s.a)(i,2),u=l[0],h=l[1],f=Object(c.useState)([]),j=Object(s.a)(f,2),d=j[0],b=j[1],m=function(){if(""!==r|""!==u){var e=u.match(/\S+/g);e=null===e?[]:e,b((function(t){return[].concat(Object(g.a)(t),[(n=r,o=e,{key:d.length,mesage:n,option:o,response:Math.floor(Math.random()*o.length)})]);var n,o})),a("")}},v=function(e){13===e.keyCode&&m()};return Object(c.useEffect)((function(){e.current.scrollIntoView({block:"end"})}),[d]),Object(o.jsxs)("div",{className:"chatBox text",children:[Object(o.jsx)("strong",{children:"\u30da\u30c3\u30c8\u306b\u805e\u304f:"}),Object(o.jsxs)("div",{className:"chats",children:[d.map((function(e){return Object(o.jsxs)("div",{className:"chat",children:[Object(o.jsx)("strong",{children:"\u3042\u306a\u305f: "}),e.mesage,Object(o.jsx)("br",{}),e.option[e.response]]},e.key)})),Object(o.jsx)("div",{ref:e})]}),Object(o.jsxs)("div",{className:"chatInputContainer",children:[Object(o.jsx)("input",{type:"text",className:"chatInput",placeholder:"\u8cea\u554f",onChange:function(e){a(e.target.value)},onKeyUp:v,value:r}),Object(o.jsx)("input",{type:"text",className:"chatInput",placeholder:"\u306f\u3044/\u3044\u3048\u3048",onChange:function(e){h(e.target.value)},onKeyUp:v,value:u}),Object(o.jsx)("button",{className:"chatBtn",onClick:m,children:"\u78ba\u8a8d"})]})]})},m=function(){var e=36e6,t=36e6,n=6e4,r=Object(c.useState)((function(){var t=localStorage.getItem("hungryCount");if(null===t|isNaN(Number(t)))return e;var n=localStorage.getItem("hungryTimestamp"),o=t-(Date.now()-n);return o>=e?e:o<0?0:o})),a=Object(s.a)(r,2),i=a[0],l=a[1],u=function(){return Math.round(5*i/e)},h=function(t){l((function(n){var o=n+t;return o>=e?e:o<0?0:o}))};Object(c.useEffect)((function(){localStorage.setItem("hungryCount",i),localStorage.setItem("hungryTimestamp",Date.now())}),[i]);var f=Object(c.useState)((function(){var e=localStorage.getItem("healthCount");if(null===e|isNaN(Number(e)))return t;if(i>0)return e;e=Number(e);var n=localStorage.getItem("healthTimestamp"),o=localStorage.getItem("hungryCount"),c=localStorage.getItem("hungryTimestamp"),r=e+(o-(Date.now()-c))-(Date.now()-n);return r>=t?t:r<0?0:r})),j=Object(s.a)(f,2),d=j[0],g=j[1],b=function(){return Math.floor(5*d/t)},m=function(e){g((function(n){var o=n+e;return o>=t?t:o<0?0:o}))};return Object(c.useEffect)((function(){localStorage.setItem("healthCount",d),localStorage.setItem("healthTimestamp",Date.now())}),[d]),Object(c.useEffect)((function(){if(i>0){var e=setInterval((function(){h(-6e4)}),n);return function(){return clearInterval(e)}}if(d>0){var t=setInterval((function(){m(-6e4)}),n);return function(){return clearInterval(t)}}})),Object(o.jsxs)("div",{className:"text feed",children:[Object(o.jsx)("strong",{children:"\u6e80\u8179\u5ea6:"})," ","\ud83c\udf56".repeat(u())," ",0===u()&&"\uff08\u7a7a\u8179\uff01\ud83d\ude28\uff09",Object(o.jsx)("br",{}),Object(o.jsx)("strong",{children:"\u5065\u5eb7\u5ea6:"})," ","\u2764 ".repeat(b())," ",0===b()&&"\uff08\u7015\u6b7b\uff01\ud83d\udc80\uff09",Object(o.jsx)("br",{}),Object(o.jsx)("button",{type:"button",onClick:function(){h(36e5)},children:"\u98df\u4e8b"}),Object(o.jsx)("button",{type:"button",onClick:function(){m(36e5)},children:"\u6cbb\u7642"})]})},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(c.useEffect)((function(){return window.addEventListener(e,t,n),function(){window.removeEventListener(e,t)}}))},p=function(){var e,t=Object(c.useState)("none"),n=Object(s.a)(t,2),r=n[0],a=n[1];v("beforeinstallprompt",(function(t){t.preventDefault(),e=t,a("block")}));return Object(o.jsx)("button",{className:"add-button",style:{display:r},onClick:function(){"block"===r&&(a("none"),e.prompt(),e.userChoice.then((function(t){"accepted"===t.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),e=null})))},children:"Add to home screen"})};var O=function(){return Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"sub-container",width:1280,height:720,children:[Object(o.jsx)(d,{w:1280,h:720}),Object(o.jsx)(m,{}),Object(o.jsx)(b,{}),Object(o.jsx)(p,{})]})})},w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),o(e),c(e),r(e),a(e)}))};i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(O,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/familiar-pwa2",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){console.log("isLocalhost");var t="".concat("/familiar-pwa2","/service-worker.js");w?(console.log("isLocalhost"),function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):x(t,e)}))}}(),S()}},[[85,1,2]]]);
//# sourceMappingURL=main.ef982a33.chunk.js.map