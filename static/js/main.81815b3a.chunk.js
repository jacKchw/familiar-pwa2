(this["webpackJsonpfamiliar-pwa2"]=this["webpackJsonpfamiliar-pwa2"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(5),a=n.n(o),r=n(31),i=n.n(r),s=(n(37),n(38),n(8)),l=n(20),u=n.n(l),h=n(10),f=function(e){var t=u()("./img/bg.jpg"),n=Object(s.a)(t,1)[0];return Object(c.jsx)(h.Image,{width:e.w,height:e.h,image:n})},j=function(){var e=u()("./img/walking_01.png"),t=Object(s.a)(e,1)[0];return Object(c.jsx)(h.Image,{width:500,height:500,x:390,y:130,image:t})},g=function(e){return Object(c.jsx)(h.Stage,{className:"stage",width:e.w,height:e.h,children:Object(c.jsxs)(h.Layer,{children:[Object(c.jsx)(f,{w:e.w,h:e.h}),Object(c.jsx)(j,{})]})})},b=n(32),d=function(){var e=Object(o.useRef)(null),t=Object(o.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)(""),l=Object(s.a)(i,2),u=l[0],h=l[1],f=Object(o.useState)((function(){var e=localStorage.getItem("chat");return null===e?[]:JSON.parse(e)})),j=Object(s.a)(f,2),g=j[0],d=j[1],m=function(){if(""!==a|""!==u){var e=u.match(/\S+/g);e=null===e?[]:e,d((function(t){return[].concat(Object(b.a)(t),[(n=a,c=e,{key:g.length,mesage:n,option:c,response:Math.floor(Math.random()*c.length)})]);var n,c})),r("")}},v=function(e){13===e.keyCode&&m()};return Object(o.useEffect)((function(){e.current.scrollIntoView({block:"end"}),localStorage.setItem("chat",JSON.stringify(g))}),[g]),Object(c.jsxs)("div",{className:"chatBox text",children:[Object(c.jsx)("strong",{children:"\u30da\u30c3\u30c8\u306b\u805e\u304f:"}),Object(c.jsx)("button",{className:"chatBtn",onClick:function(){d([])},children:"\u30ea\u30bb\u30c3\u30c8"}),Object(c.jsxs)("div",{className:"chats",children:[g.map((function(e){return Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsx)("strong",{children:"\u3042\u306a\u305f: "}),e.mesage,Object(c.jsx)("br",{}),e.option[e.response]]},e.key)})),Object(c.jsx)("div",{ref:e})]}),Object(c.jsxs)("div",{className:"chatInputContainer",children:[Object(c.jsx)("input",{type:"text",className:"chatInput",placeholder:"\u8cea\u554f",onChange:function(e){r(e.target.value)},onKeyUp:v,value:a}),Object(c.jsx)("input",{type:"text",className:"chatInput",placeholder:"\u306f\u3044/\u3044\u3048\u3048",onChange:function(e){h(e.target.value)},onKeyUp:v,value:u}),Object(c.jsx)("button",{className:"chatBtn",onClick:m,children:"\u78ba\u8a8d"})]})]})},m=function(){var e=36e6,t=36e6,n=6e4,a=Object(o.useState)((function(){var t=localStorage.getItem("hungryCount");if(null===t|isNaN(Number(t)))return e;var n=localStorage.getItem("hungryTimestamp"),c=t-(Date.now()-n);return c>=e?e:c<0?0:c})),r=Object(s.a)(a,2),i=r[0],l=r[1],u=function(){return Math.round(5*i/e)},h=function(t){l((function(n){var c=n+t;return c>=e?e:c<0?0:c}))};Object(o.useEffect)((function(){localStorage.setItem("hungryCount",i),localStorage.setItem("hungryTimestamp",Date.now())}),[i]);var f=Object(o.useState)((function(){var e=localStorage.getItem("healthCount");if(null===e|isNaN(Number(e)))return t;if(i>0)return e;e=Number(e);var n=localStorage.getItem("healthTimestamp"),c=localStorage.getItem("hungryCount"),o=localStorage.getItem("hungryTimestamp"),a=e+(c-(Date.now()-o))-(Date.now()-n);return a>=t?t:a<0?0:a})),j=Object(s.a)(f,2),g=j[0],b=j[1],d=function(){return Math.floor(5*g/t)},m=function(e){b((function(n){var c=n+e;return c>=t?t:c<0?0:c}))};return Object(o.useEffect)((function(){localStorage.setItem("healthCount",g),localStorage.setItem("healthTimestamp",Date.now())}),[g]),Object(o.useEffect)((function(){if(i>0){var e=setInterval((function(){h(-6e4)}),n);return function(){return clearInterval(e)}}if(g>0){var t=setInterval((function(){m(-6e4)}),n);return function(){return clearInterval(t)}}})),Object(c.jsxs)("div",{className:"text feed",children:[Object(c.jsx)("strong",{children:"\u6e80\u8179\u5ea6:"})," ","\ud83c\udf56".repeat(u())," ",0===u()&&"\uff08\u7a7a\u8179\uff01\ud83d\ude28\uff09",Object(c.jsx)("br",{}),Object(c.jsx)("strong",{children:"\u5065\u5eb7\u5ea6:"})," ","\u2764 ".repeat(d())," ",0===d()&&"\uff08\u7015\u6b7b\uff01\ud83d\udc80\uff09",Object(c.jsx)("br",{}),Object(c.jsx)("button",{type:"button",onClick:function(){h(36e5)},children:"\u98df\u4e8b"}),Object(c.jsx)("button",{type:"button",onClick:function(){m(36e5)},children:"\u6cbb\u7642"})]})};var v=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"sub-container",width:1280,height:720,children:[Object(c.jsx)(g,{w:1280,h:720}),Object(c.jsx)(m,{}),Object(c.jsx)(d,{})]})})},O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),a(e),r(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/familiar-pwa2",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){console.log("isLocalhost");var t="".concat("/familiar-pwa2","/service-worker.js");O?(console.log("isLocalhost"),function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):p(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):p(t,e)}))}}(),w()}},[[85,1,2]]]);
//# sourceMappingURL=main.81815b3a.chunk.js.map